<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#064e3b">
    <title>Plant Vibe Pro - Expert Mode</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style> 
        [x-cloak] { display: none !important; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 10px; }
        .star-rating { letter-spacing: 2px; }
    </style>
</head>
<body class="bg-[#f8faf8] p-4 md:p-8 font-['Plus_Jakarta_Sans']" x-data="plantApp()">

    <div class="max-w-4xl mx-auto">
        <div class="flex flex-col md:flex-row justify-between items-center mb-10 bg-white p-6 rounded-[2.5rem] shadow-sm border border-green-100 gap-4">
            <div>
                <h1 class="text-3xl font-extrabold text-green-900">Moje D≈æungle üåø</h1>
                <p class="text-green-600 text-sm font-medium" x-text="season === 'summer' ? 'Letn√≠ re≈æim ‚òÄÔ∏è' : 'Zimn√≠ re≈æim ‚ùÑÔ∏è'"></p>
            </div>
            <div class="flex bg-gray-100 p-1 rounded-2xl">
                <button @click="setSeason('summer')" :class="season === 'summer' ? 'bg-white shadow-sm text-orange-500' : 'text-gray-400'" class="px-4 py-2 rounded-xl text-sm font-bold transition-all">L√©to</button>
                <button @click="setSeason('winter')" :class="season === 'winter' ? 'bg-white shadow-sm text-blue-500' : 'text-gray-400'" class="px-4 py-2 rounded-xl text-sm font-bold transition-all">Zima</button>
            </div>
        </div>

        <div class="bg-white rounded-[2.5rem] p-8 shadow-sm border border-green-100 mb-10">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="lg:col-span-1">
                    <label class="text-[10px] font-black uppercase text-gray-400 ml-1">N√°zev / Druh</label>
                    <input x-model="newName" @input="checkLibrary()" list="plantSuggestions" type="text" placeholder="Hledej..." class="w-full bg-gray-50 border-none rounded-2xl px-5 py-4 mt-1 focus:ring-2 focus:ring-green-500 outline-none">
                    <datalist id="plantSuggestions">
                        <template x-for="item in fullLibrary" :key="item.n">
                            <option :value="item.n"></option>
                        </template>
                    </datalist>
                </div>
                <div><label class="text-[10px] font-black uppercase text-gray-400 ml-1">L√©to (dny)</label><input x-model="summerDays" type="number" class="w-full bg-gray-50 border-none rounded-2xl px-5 py-4 mt-1 text-orange-600 font-bold outline-none"></div>
                <div><label class="text-[10px] font-black uppercase text-gray-400 ml-1">Zima (dny)</label><input x-model="winterDays" type="number" class="w-full bg-gray-50 border-none rounded-2xl px-5 py-4 mt-1 text-blue-600 font-bold outline-none"></div>
                <div><label class="text-[10px] font-black uppercase text-gray-400 ml-1">Naposledy zalito</label><input x-model="lastWateredDate" type="date" class="w-full bg-gray-50 border-none rounded-2xl px-5 py-4 mt-1 font-bold text-gray-700 outline-none"></div>
            </div>
            <button @click="addPlant()" class="w-full mt-6 bg-green-900 text-white py-4 rounded-2xl font-bold hover:bg-black transition-all shadow-xl active:scale-[0.98]">P≈ôidat kytku do sb√≠rky +</button>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
            <template x-for="plant in plants" :key="plant.id">
                <div class="bg-white rounded-[3rem] p-8 shadow-sm border border-green-50 relative transition-all flex flex-col h-full" x-data="{ showCare: false }">
                    <button @click="triggerDelete(plant.id)" class="absolute top-8 right-8 text-gray-300 hover:text-red-500 transition-colors">‚úï</button>
                    
                    <div class="flex items-start gap-6 mb-6">
                        <div class="text-6xl bg-gray-50 w-24 h-24 flex items-center justify-center rounded-[2rem]" x-text="plant.daysLeft <= 0 ? 'ü•Ä' : getIcon(plant.name)"></div>
                        <div class="pt-2">
                             <p class="text-[10px] font-black text-gray-400 uppercase mb-1">N√°roƒçnost</p>
                             <div class="text-amber-400 star-rating text-lg font-bold" x-text="'‚≠ê'.repeat(getCare(plant.name).difficulty)"></div>
                        </div>
                    </div>
                    
                    <h2 class="text-2xl font-black text-gray-900 mb-1" x-text="plant.name"></h2>
                    <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-6">Naposledy: <span class="text-gray-600" x-text="plant.lastWatered"></span></p>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex justify-between items-end">
                            <div>
                                <span class="text-4xl font-black" :class="plant.daysLeft <= 0 ? 'text-red-600' : 'text-green-900'" x-text="plant.daysLeft"></span>
                                <span class="text-sm font-bold text-gray-400 uppercase">dn√≠</span>
                            </div>
                        </div>
                        <div class="w-full bg-gray-100 h-4 rounded-full overflow-hidden p-1">
                            <div class="h-full rounded-full transition-all duration-1000" :class="plant.daysLeft <= 0 ? 'bg-red-500' : 'bg-green-500'" :style="`width: ${Math.max(0, (plant.daysLeft / (season === 'summer' ? (plant.summerDays || 7) : (plant.winterDays || 14))) * 100)}%`" ></div>
                        </div>
                    </div>

                    <div class="flex gap-2 mt-auto">
                        <button @click="waterPlant(plant.id)" class="flex-1 py-4 bg-green-600 text-white font-black rounded-2xl hover:bg-green-700 transition-all shadow-lg active:scale-95">ZAL√çT üíß</button>
                        <button @click="showCare = !showCare" class="px-5 py-4 bg-amber-100 text-amber-700 font-black rounded-2xl hover:bg-amber-200 transition-all flex items-center justify-center">
                            <span x-text="showCare ? ' Zav≈ô√≠t' : ' Sk≈ô√≠≈à p√©ƒçe'"></span>
                        </button>
                    </div>

                    <div x-show="showCare" x-transition x-cloak class="mt-6 pt-6 border-t border-dashed border-amber-200 text-sm space-y-4">
                        <div class="bg-amber-50/50 p-4 rounded-2xl">
                            <p class="font-bold text-amber-900 mb-1 underline flex items-center gap-2">üìç Um√≠stƒõn√≠</p>
                            <p class="text-amber-800" x-text="getCare(plant.name).place"></p>
                        </div>
                        <div class="bg-blue-50/50 p-4 rounded-2xl">
                            <p class="font-bold text-blue-900 mb-1 underline flex items-center gap-2">üíß Voda</p>
                            <p class="text-blue-800" x-text="getCare(plant.name).water"></p>
                        </div>
                        <div class="bg-purple-50/50 p-4 rounded-2xl">
                            <p class="font-bold text-purple-900 mb-1 underline flex items-center gap-2">üß™ Hnojen√≠</p>
                            <p class="text-purple-800" x-text="getCare(plant.name).fertilizer"></p>
                        </div>
                        <div class="bg-stone-50 p-4 rounded-2xl">
                            <p class="font-bold text-stone-900 mb-1 underline">ü™¥ Substr√°t & P≈ôesazov√°n√≠</p>
                            <p class="text-stone-800 mb-2"><strong class="text-[10px] uppercase">Mix:</strong> <span x-text="getCare(plant.name).soil"></span></p>
                            <p class="text-stone-800"><strong class="text-[10px] uppercase">Kdy:</strong> <span x-text="getCare(plant.name).repot"></span></p>
                        </div>
                        <div class="bg-red-50/50 p-4 rounded-2xl border border-red-100">
                            <p class="font-bold text-red-900 mb-1 underline">‚ö†Ô∏è SOS: Co je ≈°patnƒõ?</p>
                            <ul class="text-red-800 space-y-1 text-xs list-disc pl-4">
                                <template x-for="sign in getCare(plant.name).warnings">
                                    <li x-text="sign"></li>
                                </template>
                            </ul>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <div x-show="showDeleteModal" x-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
            <div @click.away="showDeleteModal = false" class="bg-white rounded-[2.5rem] p-8 max-w-sm w-full shadow-2xl text-center">
                <div class="text-5xl mb-4">ü•∫</div>
                <h3 class="text-xl font-black text-gray-900 mb-2">Opravdu ji chce≈° odstranit?</h3>
                <p class="text-gray-500 mb-8 text-sm">Tento krok nejde vz√≠t zpƒõt.</p>
                <div class="flex flex-col gap-3">
                    <button @click="showDeleteModal = false" class="w-full py-4 bg-gray-100 text-gray-800 font-bold rounded-2xl hover:bg-gray-200 transition-all">Ne, proboha! üåø</button>
                    <button @click="deletePlant()" class="w-full py-4 bg-red-100 text-red-600 font-bold rounded-2xl hover:bg-red-200 transition-all">Ano, sbohem ‚ö∞Ô∏è</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function plantApp() {
            return {
                plants: [],
                newName: '',
                summerDays: 7,
                winterDays: 14,
                lastWateredDate: new Date().toISOString().split('T')[0],
                season: 'summer',
                showDeleteModal: false,
                plantToDelete: null,
                
                fullLibrary: [
                    { 
                        n: 'Monstera', s: 7, w: 14, difficulty: 2,
                        place: 'Svƒõtl√© m√≠sto bez p≈ô√≠m√©ho slunce (polost√≠n).', 
                        water: 'Odst√°t√°, pokojov√° teplota. Nesn√°≈°√≠ p≈ôelit√≠.',
                        fertilizer: 'V obdob√≠ r≈Østu (b≈ôezen-≈ô√≠jen) 1x za 14 dn√≠ tekut√Ωm hnojivem na pokojovky.',
                        soil: 'Vzdu≈°n√Ω mix: 50% substr√°t pro pokojovky, 25% perlit, 25% borov√° k≈Øra.',
                        repot: 'Jednou za 2 roky na ja≈ôe, kdy≈æ ko≈ôeny vyl√©zaj√≠ ze dna.',
                        warnings: ['≈Ωlut√© listy = p≈ôelit√≠/zahn√≠v√°n√≠ ko≈ôen≈Ø', 'Hnƒõd√© such√© ≈°piƒçky = n√≠zk√° vlhkost vzduchu', 'Mal√© listy bez dƒõr = m√°lo svƒõtla']
                    },
                    { 
                        n: 'Zamiokulkas', s: 14, w: 25, difficulty: 1,
                        place: 'T√©mƒõ≈ô kamkoliv, zvl√°dne i st√≠n. Pozor na p≈ô√≠m√© slunce.', 
                        water: 'Mƒõkk√° voda, a≈æ kdy≈æ je substr√°t √∫plnƒõ such√Ω. Nesm√≠ st√°t ve vodƒõ!',
                        fertilizer: 'Staƒç√≠ 1x mƒõs√≠ƒçnƒõ v l√©tƒõ poloviƒçn√≠ d√°vka hnojiva.',
                        soil: 'Dob≈ôe propustn√Ω: substr√°t pro kaktusy nebo mix s p√≠skem a perlitem.',
                        repot: 'A≈æ kdy≈æ ko≈ôeny (hl√≠zy) zaƒçnou deformovat kvƒõtin√°ƒç.',
                        warnings: ['≈Ωloutnut√≠ stonk≈Ø = tot√°ln√≠ p≈ôelit√≠', 'Vr√°sƒçit√© listy = extr√©mn√≠ sucho', 'Mƒõkk√Ω stonek u b√°ze = hniloba hl√≠zy']
                    },
                    { 
                        n: 'Spathiphyllum (Lopatkovec)', s: 3, w: 7, difficulty: 2,
                        place: 'Polost√≠n a≈æ st√≠n. Nesn√°≈°√≠ pr≈Øvan.', 
                        water: 'Miluje vlhko. Ide√°lnƒõ de≈°≈•ov√° nebo p≈ôeva≈ôen√° voda.',
                        fertilizer: 'Ka≈æd√© 2 t√Ωdny v obdob√≠ kvƒõtu hnojivem pro kvetouc√≠ rostliny.',
                        soil: 'Lehk√Ω, ra≈°elinov√Ω substr√°t s perlitem pro udr≈æen√≠ vlhkosti.',
                        repot: 'Ka≈æd√© jaro, miluje ƒçerstvou zeminu.',
                        warnings: ['Svƒõ≈°en√© listy = m√° hroznou ≈æ√≠ze≈à', 'Hnƒõd√© skvrny na listech = pop√°len√≠ sluncem', 'ƒåern√© ≈°piƒçky = hromadƒõn√≠ sol√≠ z tvrd√© vody']
                    },
                    { 
                        n: 'Orchidej (Phalaenopsis)', s: 7, w: 10, difficulty: 3,
                        place: 'Dostatek svƒõtla, ale ne p≈ô√≠m√© poledn√≠ slunce (severn√≠/v√Ωchodn√≠ okno).', 
                        water: 'Nam√°ƒçen√≠ cel√©ho kvƒõtin√°ƒçe na 15 min do mƒõkk√© vody, pak nechat odkapat.',
                        fertilizer: 'Speci√°ln√≠ hnojivo pro orchideje 1x za 3 t√Ωdny bƒõhem r≈Østu.',
                        soil: 'Speci√°ln√≠ substr√°t pro orchideje (p≈ôev√°≈ænƒõ k≈Øra a mechy).',
                        repot: 'A≈æ po odkvƒõtu, kdy≈æ substr√°t zaƒçne tlet nebo ko≈ôeny zapln√≠ n√°dobu.',
                        warnings: ['Mƒõkk√© svra≈°tƒõl√© listy = nedostatek vody nebo uhnil√© ko≈ôeny', '≈Ωlut√© listy = p≈ô√≠li≈° slunce', 'Poupata opad√°vaj√≠ = pr≈Øvan nebo zima']
                    },
                    { 
                        n: 'Calathea (Kalatea)', s: 4, w: 8, difficulty: 5,
                        place: 'Vy≈°≈°√≠ vzdu≈°n√° vlhkost, stabiln√≠ teplota a polost√≠n. ≈Ω√°dn√© slunce!', 
                        water: 'V≈ædy m√≠rnƒõ vlhk√Ω substr√°t, mƒõkk√° vla≈æn√° voda.',
                        fertilizer: 'Pravidelnƒõ 1x za 14 dn√≠ v l√©tƒõ, velmi opatrnƒõ v zimƒõ.',
                        soil: 'Mix: substr√°t pro pokojovky, ra≈°elina, perlit a trocha d≈ôevƒõn√©ho uhl√≠.',
                        repot: 'Ka≈æd√© jaro do jen o trochu vƒõt≈°√≠ho kvƒõtin√°ƒçe.',
                        warnings: ['Krout√≠c√≠ se listy = such√Ω vzduch / such√Ω substr√°t', 'Hnƒõd√© okraje list≈Ø = tvrd√° voda', 'Povadl√© listy = zima nebo pr≈Øvan']
                    }
                ],

                defaultCare: {
                    difficulty: 2,
                    place: 'Svƒõtl√© m√≠sto bez p≈ô√≠m√©ho slunce.',
                    water: 'Odst√°t√° voda, zal√©vat po proschnut√≠ horn√≠ vrstvy.',
                    fertilizer: 'Hnojit univerz√°ln√≠m hnojivem 1x za 14 dn√≠ v sez√≥nƒõ.',
                    soil: 'Standardn√≠ substr√°t pro pokojovky s trochou perlitu.',
                    repot: 'Dle pot≈ôeby na ja≈ôe.',
                    warnings: ['Zmƒõna barvy list≈Ø znaƒç√≠ chybu v z√°livce', 'Povadl√© listy = sucho', 'Mƒõkk√© stonky = hniloba']
                },

                getCare(name) {
                    const found = this.fullLibrary.find(item => name.toLowerCase().includes(item.n.toLowerCase()));
                    return found || this.defaultCare;
                },

                getIcon(name) {
                    const n = name.toLowerCase();
                    if (n.includes('kaktus') || n.includes('sukulent')) return 'üåµ';
                    if (n.includes('monstera') || n.includes('fikus') || n.includes('zamiokulkas')) return 'üå¥';
                    if (n.includes('lopatkovec') || n.includes('calathea')) return '‚ú®';
                    if (n.includes('orchidej')) return 'üå∏';
                    return 'ü™¥';
                },
                
                init() {
                    const saved = localStorage.getItem('vibeJunglePro');
                    const savedSeason = localStorage.getItem('vibeJungleSeasonPro');
                    if (saved) this.plants = JSON.parse(saved);
                    if (savedSeason) this.season = savedSeason;
                    this.recalculateAll();
                    setInterval(() => this.recalculateAll(), 60000);
                },

                checkLibrary() {
                    const input = this.newName.toLowerCase().trim();
                    if (input.length > 2) {
                        const match = this.fullLibrary.find(item => item.n.toLowerCase().includes(input));
                        if (match) { 
                            this.summerDays = match.s; 
                            this.winterDays = match.w; 
                        }
                    }
                },

                addPlant() {
                    if (!this.newName) return;
                    const selectedDate = new Date(this.lastWateredDate);
                    selectedDate.setHours(12, 0, 0, 0);
                    const now = new Date();
                    const diffDays = Math.floor((now - selectedDate) / 86400000);
                    const maxDays = this.season === 'summer' ? this.summerDays : this.winterDays;
                    
                    this.plants.push({
                        id: Date.now(),
                        name: this.newName,
                        summerDays: parseInt(this.summerDays),
                        winterDays: parseInt(this.winterDays),
                        daysLeft: Math.max(0, maxDays - diffDays),
                        lastWatered: selectedDate.toLocaleDateString('cs-CZ'),
                        lastWateredMs: selectedDate.getTime()
                    });
                    this.newName = '';
                    this.lastWateredDate = new Date().toISOString().split('T')[0];
                },

                waterPlant(id) {
                    const now = new Date();
                    now.setHours(12, 0, 0, 0);
                    let p = this.plants.find(p => p.id === id);
                    if (p) {
                        p.lastWatered = now.toLocaleDateString('cs-CZ');
                        p.lastWateredMs = now.getTime();
                        p.daysLeft = this.season === 'summer' ? p.summerDays : p.winterDays;
                    }
                },

                triggerDelete(id) { this.plantToDelete = id; this.showDeleteModal = true; },
                deletePlant() { 
                    this.plants = this.plants.filter(p => p.id !== this.plantToDelete); 
                    this.showDeleteModal = false; 
                },

                recalculateAll() {
                    const now = new Date().getTime();
                    this.plants.forEach(p => {
                        const maxDays = this.season === 'summer' ? p.summerDays : p.winterDays;
                        const daysElapsed = Math.floor((now - p.lastWateredMs) / 86400000);
                        p.daysLeft = Math.max(0, maxDays - daysElapsed);
                    });
                },

                setSeason(s) {
                    this.season = s;
                    localStorage.setItem('vibeJungleSeasonPro', s);
                    this.recalculateAll();
                }
            };
        }
    </script>
</body>
</html>
